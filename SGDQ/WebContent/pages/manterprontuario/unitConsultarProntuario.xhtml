<ui:composition xmlns="http://www.w3.org/1999/xhtml"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:p="http://primefaces.org/ui"
        xmlns:f="http://java.sun.com/jsf/core">

	<h:body style="font-size:small;padding:0px;">
	<h:form id="formConsultarProntuario">        	
<!-- 				<p:messages id="mensagens" closable="true"/> -->
					<br/>
					<p:fieldset id="fieldset_filtros_de_pesquisa" legend="#{rotulo['generico.filtros.de.pesquisa']}">
				
						<div class="input-and-label">
						    <p:panelGrid>
						    	
						    	<p:row>
						    		<p:column>
								  		<p:outputLabel for="input_id" value="#{rotulo['prontuario.id']}:" />  
						    		</p:column>
						    		<p:column>
								        <p:inputMask id="input_id" value="#{prontuarioController.selected.idProntuario}" mask="9?99999999999999" placeHolder="" />
						    		</p:column>
						    	</p:row>
						    	<p:row>
						    		<p:column>
								  		<p:outputLabel for="input_nome" value="#{rotulo['prontuario.paciente.nome']}:" />  
						    		</p:column>
						    		<p:column>
								        <p:inputText id="input_nome" value="#{prontuarioController.selected.idPaciente.idPessoa.nmPessoa}" />
						    		</p:column>
						    	</p:row>
						    	<p:row>
						    		<p:column>
								  		<p:outputLabel for="input_cpf" value="#{rotulo['prontuario.paciente.cpf']}:" />  
						    		</p:column>
						    		<p:column>
								        <p:inputMask id="input_cpf" value="#{prontuarioController.selected.idPaciente.idPessoa.nuCPF}" mask="999.999.999-99" />
						    		</p:column>
						    	</p:row>
						    	
							</p:panelGrid>  	
						</div>
					</p:fieldset>
					<br/>		
					<div class="buttons-alone">
					    <p:commandButton id="button_consultar" value="#{rotulo['generico.consultar']}" action="#{prontuarioController.pesquisarProntuario}" update="formConsultarProntuario" icon="ui-icon-search" />
					    <p:commandButton id="button_novo" value="Incluir Prontuário" action="/pages/manterprontuario/cadastrar?faces-redirect=true" icon="ui-icon-plus" />
					</div>
					
					<br/>
					<div class="resultado" >
						<p:dataTable id="dataTable_consultar_prontuario" value="#{prontuarioController.items}" 
							var="prontuario" emptyMessage="Prontuário não Encontrado" 
							paginator="true" 
							paginatorPosition="bottom" resizableColumns="true" rows="10" style="width:99%"
							rowKey="#{prontuario.idProntuario}" selectionMode="single">
							
							<p:column headerText="#{rotulo['prontuario.id']}" sortBy="#{prontuario.idProntuario}" style="width:80px">
								<p:outputLabel value="#{prontuario.idProntuario}" />
							</p:column>
							
							<p:column headerText="#{rotulo['prontuario.paciente.nome']}" sortBy="#{prontuario.idPaciente.idPessoa.nmPessoa}" style="width:160px">
								<p:outputLabel value="#{prontuario.idPaciente.idPessoa.nmPessoa}" />
							</p:column>

							<p:column headerText="#{rotulo['prontuario.paciente.cpf']}" sortBy="#{prontuario.idPaciente.idPessoa.nuCPF}" style="width:110px">
								<p:outputLabel value="#{prontuario.idPaciente.idPessoa.nuCPF}" />
							</p:column>
							
							<p:column headerText="Data Inclusão" sortBy="#{prontuario.dtProntuarioInicio}"  style="width:85px">
								<h:outputText value="#{prontuario.dtProntuarioInicio}" >
									<f:convertDateTime type="date" pattern="dd/MM/yyyy"/>
								</h:outputText>
							</p:column>
							<p:column headerText="Responsável Pela Inclusão" sortBy="#{prontuario.usuario.pessoa.nmPessoa}" style="width:180px">
								<p:outputLabel value="#{prontuario.usuario.pessoa.nmPessoa}"/>
						    </p:column>
						    <p:column headerText="#{rotulo['prontuario.paciente.sexo']}" sortBy="#{prontuario.idPaciente.idPessoa.nmSexo}" style="width:100px">
								<p:outputLabel value="#{prontuario.idPaciente.idPessoa.nmSexo}"/>
						    </p:column>
							<p:column headerText="#{rotulo['generico.acoes']}" >

								<p:commandButton id="button_editar" action="#{prontuarioController.prepareEdit}" icon="ui-icon-pencil" value="Consultar"/>

<!-- 								<p:commandButton id="button_consultar_tratamentos_blarg"   -->
<!-- 									action="/pages/mantertratamento/cadastrarTratamento?faces-redirect=true"  -->
<!--  									icon="ui-icon-close"/> 				 -->
								
								<p:commandButton id="button_incluinovotratamento" 
									action="#{prontuarioController.prepareIncluirTratamento}" 
									icon="ui-icon-folder-open" 
									value="Incluir Tratamento"/>
								
							</p:column>
						</p:dataTable>
					</div>
	</h:form>				
    </h:body>     
</ui:composition>
